---
title: "Hello"
output: 
  flexdashboard::flex_dashboard:
    orientation: columns
    vertical_layout: fill
    css: custom.css
    includes:
      in_header: "custom_lazyload.html"
---

```{r setup, include=FALSE}
library(flexdashboard)
library(htmltools)
```

```{r subpages, include = FALSE}
out = NULL
for (i in 1:3) {
  subpage_env <- new.env()
  
  assign("subpage_number", i, subpage_env)
  
  out = c(out, knitr::knit_child("tag_page_iframe_page.Rmd", envir = subpage_env))
}

```
`r paste(knitr::knit_child(text = out), collapse = '')`

```{r results='asis'}
# to find the event: https://getbootstrap.com/docs/4.0/components/navs/
htmltools::tags$script(
"
$.lazyLoadXT.selector = 'iframe[data-src]'
$.lazyLoadXT.updateEvent = $.lazyLoadXT.updateEvent + ' shown.bs.tab'
"
)
```
